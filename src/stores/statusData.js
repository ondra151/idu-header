import { ref, computed } from 'vue'
import { defineStore } from 'pinia'

export const useCounterStore = defineStore({
    id: 'statusData', 
    state: () => ({
        test1: 45, 
        test2: 75,
        test3: {
            min: 16, 
            max: 24
        },  
        "cnf": {
            "rad": {
                "typ": [5, 5],
                "trCnf": [1, 1],
                "trDef": [0, 0],
                "edge": [0, 0],
                "atpc": {
                    "min": [-70, -70],
                    "max": [-30, -30]
                },
                "txp": {
                    "min": [-999, -999],
                    "maxA": [-999, -999, -999, -999, -999, -999, -999, -999, -999, -999, -999, -999, -999, -999, -999, -999]
                },
                "txf": {
                    "minE": [1000000, 1000000],
                    "maxE": [50000000, 50000000]
                },
                "rxf": {
                    "minE": [1000000, 1000000],
                    "maxE": [50000000, 50000000]
                },
                "filtMod": [0, 0],
                "filtCnf": [-999, -999],
                "pn": ["", ""],
                "sn": ["", ""],
                "fw": ["", ""],
                "side": [1, 1]
            },
            "mod": {
                "aes": {
                    "cnf": [0, 0],
                    "key": ["0", "0"]
                },
                "acm": {
                    "file": "p3_001_01",
                    "offset": [0.0, 0.0],
                    "mods": [
                        [4, 4, 16, 32, 32, 64, 64, 128, 128, 256, 256, 512, 512, 1024, 1024, 1024],
                        [4, 4, 16, 32, 32, 64, 64, 128, 128, 256, 256, 512, 512, 1024, 1024, 1024]
                    ],
                    "fecs": [
                        [1, 2, 1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 3],
                        [1, 2, 1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 3]
                    ]
                },
                "aggrTxSrc": 4,
                "carrCor": [0, 0],
                "cwFreq": [0, 0],
                "signalType": [2, 1],
                "interl": [1, 1],
                "xpic": 0,
                "eqKoef": 0
            },
            "inf": {
                "sn": "3010404010004321",
                "ln": "3010404010004321",
                "pn": "WFM-CX2-303",
                "pc": "3010411-01-01",
                "logo": "ath",
                "comp": "ATH system, s.r.o.",
                "url": "www.athsystem.com",
                "oemPn": "MICROWAVE LINK WAVEFORM-CX",
                "ids": ["LOCATION1", "user text1", "WAVEFORM-CX", "CX2 Indoor Unit", "1+0/1+1/2+0/2+2 with XPIC"],
                "fwr": ["C2_0701_01T04"],
                "fwb": ["0701_01T04"],
                "hwb": ["12AT20505_003FE_1019"],
                "hwbver": ["12AT20505_003FE"],
                "osk": ["0205"],
                "abrd": ["CX-AB"],
                "design": 505,
                "hwsm": 0,
                "uptime": 17428,
                "dateTime": "19.09.2022 12:34:21 UTC"
            },
            "net": {
                "ip": ["192.168.3.121/24", "192.168.253.243", "192.168.253.244", "0.0.0.0"],
                "gw": "192.168.3.1",
                "ipSec": ["10.10.10.10/24", "10.10.11.10/24"],
                "ftp": "ftp://192.168.1.51/",
                "mac": ["60:b1:85:00:17:1f", "", ""],
                "natAuto": 0,
                "usbAutoLogs": 0,
                "ntpd": ["ntp", "80.79.25.111"],
                "snmp": {
                    "en": 1,
                    "ver": 0,
                    "port": 161,
                    "tport": 162,
                    "tver": 3,
                    "v2trapIp": ["none", "none", "none"],
                    "v2roStr": "public",
                    "v2roIp": ["192.168.1.0/24", "none", "none"],
                    "v2rwIp": ["192.168.1.0/24", "none", "none"],
                    "v3roUsr": "public",
                    "v2rwStr": "private",
                    "v3rwUsr": "private",
                    "v3eid": "0x60b18500171f",
                    "v3enc": 0
                }
            },
            "ala": {
                "rxl": [-75.0, -75.0],
                "rtmp": [-25.0, 75.0, -25.0, 75.0],
                "mse": [-25.0, -25.0],
                "fec": [10, 10],
                "itmp": [-5.0, 90.0],
                "cabl": [-35.0, 0.0],
                "mask": [1048053, 251659607],
                "conf": [
                    [
                        [495989, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ],
                    [
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ],
                    [
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ],
                    [
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ]
                ],
                "def": [
                    [
                        [513525, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ]
                ],
                "prot": [
                    [
                        [0, 251659523],
                        [-3, -1],
                        [-3, -1],
                        [-3, -1],
                        [-3, -1]
                    ]
                ]
            },
            "port": {
                "lan": {
                    "mode": [0, 0, 0],
                    "mdix": [0, 0, 0],
                    "fc": [0, 0, 0],
                    "qos": {
                        "mode": [0, 0, 0],
                        "policy": [3, 3, 3],
                        "prior": [0, 0, 0],
                        "override": [0, 0, 0]
                    },
                    "standby": [0, 0],
                    "prot12": 0
                },
                "sfp": {
                    "mode": [1, 1, 1, 1],
                    "standby": [0, 0, 0, 0],
                    "prot1234": [0, 0]
                },
                "wan": {
                    "fc": [2, 2, 0, 0],
                    "qos": {
                        "mode": [0, 0, 0, 0],
                        "policy": [3, 3, 0, 0],
                        "prior": [0, 0, 0, 0],
                        "override": [0, 0, 0, 0]
                    }
                },
                "vlan": {
                    "grp": ["222211", ""],
                    "mode": "bbbbbb",
                    "vid": "000100010001000100010001"
                }
            },
            "mux": {
                "wanSrc": [4, 15, 0, 0],
                "ptpSrc": [0, 0],
                "ethSrc": [0, 15, 15, 15],
                "ethSpd": [1000, 0, 0, 0],
                "emmSrc": [15, 15],
                "emmSpd": [0, 0],
                "sfpDest": [15, 15, 15, 15]
            },
            "emm": {
                "enSfp": 0,
                "en": [0, 0, 0, 0],
                "type": [0, 0, 0, 0],
                "hwb": ["n/c", "n/c", "n/c", "n/c"],
                "fwb": ["n/c", "n/c", "n/c", "n/c"],
                "sn": ["n/c", "n/c", "n/c", "n/c"],
                "pc": ["n/c", "n/c", "n/c", "n/c"],
                "pn": ["n/c", "n/c", "n/c", "n/c"],
                "pos": [0, 0, 0, 0],
                "phyPos": [-1, -1, -1, -1],
                "mode": [0, 0, 0, 0],
                "conf": [
                    [0],
                    [0],
                    [0],
                    [0]
                ]
            },
            "lic": {
                "rtyp": 6315,
                "exp": "unlimited",
                "date": "2205231254",
                "stat": "permanent / ok",
                "opts": "STDR:STSR:STST:ESSM:ESDM:RSDM:RSSM:RSBM:RSMM:RSTM:AGR1:PRT1:FECL:FECS:MTC1:ARS1:ARS2:BBB1:ULL1:INTL:TIM1:AES1:XPIC:PRT2:REP1:PRT3:LATM:",
                "des": "DXN3:511:512:513:514:515:",
                "allDes": "DXN1:DXN2:DXN3:511:512:513:514:515:521:",
                "const": "_0004_0016_0032_0064_0128_0256_0512_1024_",
                "bwVer": [16777316, 33554532, 50331748, 16777416, 33554632, 50331848, 16777466, 33554682, 50331898, 16777516, 33554732, 50331948, 16777591, 33554807, 50332023, 16777716, 33554932, 50332148, 16777966, 33555182, 50332398, 16778216, 33555432, 50332648, 16780716, 33557932, 50335148, 16782216, 33559432, 50336648, 16784216, 33561432, 50338648, 16787216, 33564432, 50341648, 16789216, 33566432, 50343648, 16791216, 33568432, 50345648, 16797216, 33574432, 50351648, 16802216, 33579432, 50356648, 16804716, 33581932, 50359148, 16805216, 33582432, 50359648, 16807216, 33584432, 50361648, 16817216, 33594432, 50371648, 16827216, 33604432, 50381648, 16833216, 33610432, 50387648, 16837216, 33614432, 50391648, 16857216, 33634432, 50411648, 16872216, 33649432, 50426648, 16877216, 33654432, 50431648, 16889216, 33666432, 50443648, 16897216, 33674432, 50451648, 16907216, 33684432, 50461648],
                "bw": "_00500_00750_01000_03500_05000_07000_10000_12000_14000_20000_25000_27500_28000_30000_40000_",
                "vers": "_02_03_",
                "named": "",
                "spd": "2000",
                "typ": 0
            }
        },
        "act": {
            "rad": {
                "telem": 3,
                "muteAct": [-999, 0, 0, 0, -999, 0, 0, 0],
                "muteCfg": [0, 0, 0, 0, 1, 0, 0, 0],
                "txp": {
                    "act": [19, -99.9, 16, 0.0, 15, -99.9, 17, 0.0],
                    "set": [12.0, 0.0, 0.0, 0.0, -99.9, 0.0, 0.0, 0.0],
                    "max": [-999, -999]
                },
                "rxl": [-52.2, -99.9, -50.3, 0.0, -47.4, -99.9, -49.3, 0.0],
                "resp": [0, 1],
                "txIfl": [-100.1, -100.1], 
                "tmp": [-99.9, -99.9],
                "pwr": [0, 1],
                "pg": [1, 1],
                "remRadInd": [0, 0, 0],
                "atpc": {
                    "on": [1, 0, 0, 0, 0, 0, 0, 0],
                    "rxl": [-55.0, -99.9, 0.0, 0.0, -55.0, -99.9, 0.0, 0.0]
                },
                "txf": [11260, -16300, 11820, 0, 18865, -99999999, 18925, 0],
                "rxf": [-999, -99999999, 0, 0, -999, -99999999, 0, 0]
            },
            "mod": {
                "acm": {
                    "cnf": [2, 0, 0, 0, 2, 0, 0, 0],
                    "prof": [1, 0, 0, 0, 1, 0, 0, 0],
                    "mask": [
                        [65535, 0, 0, 0, 65535, 0, 0, 0],
                        [65535, 0, 0, 0, 65535, 0, 0, 0],
                        [65535, 0, 0, 0, 65535, 0, 0, 0]
                    ]
                },
                "ber": {
                    "stat": [1, 1],
                    "spd": [23.153000, 23.160000],
                    "ptrn": [0, 0, 0, 0]
                },
                "rxCnf": [0, 0, 0, 0, 5, 0, 0, 0],
                "rxAct": [12, 4, 0, 0, 5, 8, 0, 0],
                "txCnf": [0, 0, 0, 0, 5, 0, 0, 0],
                "txAct": [4, 2, 0, 0, 7, 3, 0, 0],
                "bw": ["30000_02", "3500_00", "3500_00", "3500_00", "30000_02", "3500_00", "3500_00", "3500_00"],
                "carrOffs": [0, 0],
                "rxIfl": [-40.0, -40.0],
                "fecl": [0, 0, 0, 0, 0, 0, 0, 0],
                "syncb": [0, 0, 0, 0, 0, 0, 0, 0],
                "mse": [-34.2, -999.9, -34.8, 0.0, -38.2, -999.9, -37.1, 0.0],
                "prt": {
                    "mode": [0, 1, 2, 3],         
//                  "role": [hex, x4],
                    "role": 5,               
                    "swap": 0,                    
                    "foSync":   [0, 0, 0, 0],     
                    "align":    [1, 0],          
                    "rxSrc":    [1, 1, 2, -1]
                },
                "reachable": [3, 0, 0, 0],
                "multihop": [0, 0],
                "aggrTxSrc": [0, 0],
                "actSpeed": [
                    [0.00, 46.23, 0.00, 46.23],
                    [0.00, 0.00, 0.00, 0.00],
                    [0.00, 0.00, 0.00, 0.00],
                    [0.00, 0.00, 0.00, 0.00]
                ],
                "bidir": [0, 0, 0, 0, 3, 0, 0, 0],
                "cmdMode": [13, 0, 0, 0]
            },
            "ala": {
                "hw": 0,
                "hwTxt": "none",
                "sw": 0,
                "swTxt": "none",
                "emmTxt": ["none", "none", "none", "none"],
                "rad": [0, 0],
                "radTxt": ["none", "n/a"],
                "fwTxt": "",
                "hist": [1026, 3, 0, 0],
                "stat": [
                    [
                        [1317406976, 251659603],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ],
                    [
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ],
                    [
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ],
                    [
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0],
                        [0, 0]
                    ]
                ]
            },
            "port": {
                "lan": {
                    "status": [0, 0, 1],
                    "speed": [0, 0, 12],
                    "mode": [0, 0, 0],
                    "fc": [0, 0, 0]
                },
                "sfp": {
                    "status": [3, 3, 3, 3],
                    "mode": [1, 1, 1, 1],
                    "fc": [1, 1, 1, 1]
                }
            },
            "sys": {
                "name": ["CX2-121", "n/a", "", ""],
                "cfgSaved": [1, 0, 1, 1],
                "resetIp": "valid",
                "drvStat": 0,
                "cfgChanged": 0,
                "ipCfgSaved": 0,
                "autoW0": [0, 0, 0, 0],
                "fanMode": [130],
                "fanRot": [6265, 0],
                "temp": [44.0, 48.5]
            },
            "emm": {
                "en": [-1, -1, -1, -1],
                "txCh": 0,
                "type": [0, 0, 0, 0],
                "status": [
                    ["", "", "", ""],
                    ["", "", "", ""],
                    ["", "", "", ""],
                    ["", "", "", ""]
                ],
                "berStatus": [0, 0, 0, 0]
            },
            "cnt": {
                "mod": [
                    [100429508848, 0, 0, 0],
                    [100428572125, 0, 0, 0],
                    [0, 0, 0, 17379],
                    [0, 0, 0, 17379],
                    [56175, 74, 0, 0],
                    [6, 4, 6, 4],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [402374109008, 0, 0, 0],
                    [0, 0, 0, 17379],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 17379],
                    [0, 0, 0, 17379],
                    [402450016936, 0, 0, 0],
                    [0, 0, 0, 17379],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0],
                    [0, 0, 0, 0]
                ],
                "phy": [
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00],
                    [0, 0.0, 0.00, 0.00, 0.00, 0.00]
                ],
                "switch": [
                    [0, 0, 574654, 0, 6890891, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 3985, 0, 5300, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 189, 0, 1, 0, 0, 0, 0],
                    [0, 0, 738, 0, 8, 0, 0, 0, 0],
                    [0, 0, 314, 0, 314, 0, 0, 0, 0],
                    [0, 0, 4309, 0, 4314, 0, 0, 0, 0],
                    [0, 0, 372, 0, 372, 0, 0, 0, 0],
                    [0, 0, 427, 0, 427, 0, 0, 0, 0],
                    [0, 0, 359, 0, 359, 0, 0, 0, 0],
                    [0, 0, 4435, 0, 4435, 0, 0, 0, 0],
                    [0, 0, 6890453, 0, 574654, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 5300, 0, 3985, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 3, 0, 738, 0, 0, 0, 0],
                    [0, 0, 1, 0, 189, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0]
                ],
                "lanTxTraffic": [0, 0, 0, 0],
                "lanRxTraffic": [0, 0, 0, 0],
                "consecERS": [17379, 17379],
                "rtle": [0, 0, 0, 0, 0, 0, 0, 0],
                "rers": [17379, 0, 0, 0, 17379, 0, 0, 0],
                "tle": [0, 0, 0, 0, 0, 0, 0, 0],
                "ers": [17379, 0, 0, 0, 17379, 0, 0, 0]
            }
        }
    }), 
    getters: {
        isSwap: (state) => {
            return state.act.mod.prt.swap;
        }, 


        getTxf: (state) => {
            return (idu) => state.act.rad.txf[idu];
        }, 
        getTxp: (state) => {
            return (idu) => state.act.rad.txp.act[idu];
        }, 
        getMse: (state) => {
            return (idu) => state.act.mod.mse[idu];
        }, 
        getRxl: (state) => {
            return (idu) => state.act.rad.rxl[idu];
        }, 
        getMute: (state) => {
            return (idu) => state.act.rad.muteAct[idu];
        }, 
        getChannel: (state) => {
            return state.act.rad.telem;
        }

    }, 
    actions: {
        setValueHeaderCell: (value, condition = 0) => {
            if (condition === 0) {
                return value > 0 ? value : 'n/a'
            } else if (condition === 1) {
                return value >= 0 ? value : 'n/a'
            } else if (condition === 2) {
                return value < -99 ? 'n/a' : value
            }
        },

        setClassHeaderCell: (value) => {
            return value === 'n/a';    
        },

        // TEST
        setTest1Value() {
            let random = Math.floor(Math.random() * 6);
            console.log('setTest1Value - odecti', random);
            this.test1 -= random;
            this.act.mod.mse[0] -= random;  
            this.act.rad.txp.act[0] -= random; 
            console.log(this.act.mod.mse[0], this.act.rad.txp.act[0], this.test1);

            this.changeRandomValues();
        }, 

        changeRandomValues() {
            console.log('changeRandomValues');

            if (this.act.mod.mse[0] < -40) {
                this.$patch({
                    act: {
                        rad: {
                            txp: {
                                act: [
                                    350, this.act.rad.txp.act[1], this.act.rad.txp.act[2], this.act.rad.txp.act[3], 
                                    this.act.rad.txp.act[4], this.act.rad.txp.act[5], this.act.rad.txp.act[6], this.act.rad.txp.act[7]
                                ] 
                            }
                        }
                    }, 

                    test3: {
                        min: 700,
                        max: 900
                    },
                    test2: 600
                })
            }
        }
    }
});


